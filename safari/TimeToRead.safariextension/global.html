<!DOCTYPE html>

<script>
	// Set up the Listeners
	safari.application.addEventListener("message", handleMessage, false);
	safari.application.addEventListener("activate", handleActivate, true);

	// Create popover instance
	const gui = safari.extension.popovers[0].contentWindow

	// Message Handling
	function handleMessage(msg) {
		if (msg.name == "estimatedTime") {
			gui.estimateTime(msg);
		}

	}

	// Activate Handling
	function handleActivate(event) {
		safari.application.activeBrowserWindow.activeTab.page.dispatchMessage("kickstartMyHeart", true);
	}

</script>
