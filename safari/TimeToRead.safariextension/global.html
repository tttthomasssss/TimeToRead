<!DOCTYPE html>

<script>
	// Set up the Listener
	//safari.application.addEventListener("command", performCommand, false);
	safari.application.addEventListener("message", handleMessage, false);


	// http://www.walid.tn/browser-extension-development/a-step-by-step-tutorial-on-building-your-own-safari-extension-part-2.html
	// http://stackoverflow.com/questions/4965244/popups-in-a-safari-extension
	// TODO: Update manifest.m
	const gui = safari.extension.popovers[0].contentWindow
	function handleMessage(msg) {
		if (msg.name == "estimatedTime") {
			gui.estimateTime(msg);
		}

	}

	// Function to perform when event is received
	//function performCommand(event) {
	//	// Make sure event comes from the button
    //	if (event.command == "estimateTimeToRead") {
	//		var pageContent = safari.application.activeBrowserWindow.activeTab.page; // Open a new tab
	//		alert(wordCount);
    //	}
	//}

</script>
